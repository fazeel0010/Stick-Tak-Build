!function(t,i,e,n){var a=t.fn.peity=function(i,e){return l&&this.each((function(){var n=t(this),s=n.data("_peity");s?(i&&(s.type=i),t.extend(s.opts,e)):(s=new r(n,i,t.extend({},a.defaults[i],n.data("peity"),e)),n.change((function(){s.draw()})).data("_peity",s)),s.draw()})),this},r=function(t,i,e){this.$el=t,this.type=i,this.opts=e},s=r.prototype,h=s.svgElement=function(e,n){return t(i.createElementNS("http://www.w3.org/2000/svg",e)).attr(n)},l="createElementNS"in i&&h("svg",{})[0].createSVGRect;s.draw=function(){var t=this.opts;a.graphers[this.type].call(this,t),t.after&&t.after.call(this,t)},s.fill=function(){var i=this.opts.fill;return t.isFunction(i)?i:function(t,e){return i[e%i.length]}},s.prepare=function(t,i){return this.$svg||this.$el.hide().after(this.$svg=h("svg",{class:"peity"})),this.$svg.empty().data("_peity",this).attr({height:i,width:t})},s.values=function(){return t.map(this.$el.text().split(this.opts.delimiter),(function(t){return parseFloat(t)}))},a.defaults={},a.graphers={},a.register=function(t,i,e){this.defaults[t]=i,this.graphers[t]=e},a.register("pie",{fill:["#ff9900","#fff4dd","#ffc66e"],radius:8},(function(i){if(!i.delimiter){var n=this.$el.text().match(/[^0-9\.]/);i.delimiter=n?n[0]:","}var a=t.map(this.values(),(function(t){return t>0?t:0}));if("/"==i.delimiter){var r=a[0],s=a[1];a=[r,e.max(0,s-r)]}for(var l=0,p=a.length,o=0;l<p;l++)o+=a[l];o||(p=2,o=1,a=[0,1]);var d=2*i.radius,u=this.prepare(i.width||d,i.height||d),c=u.width(),f=u.height(),g=c/2,v=f/2,m=e.min(g,v),y=i.innerRadius;"donut"!=this.type||y||(y=.5*m);var w=e.PI,x=this.fill(),$=this.scale=function(t,i){var n=t/o*w*2-w/2;return[i*e.cos(n)+g,i*e.sin(n)+v]},k=0;for(l=0;l<p;l++){var j,A=a[l],E=A/o;if(0!=E){if(1==E)if(y){var L=g-.01,M=v-m,b=v-y;j=h("path",{d:["M",g,M,"A",m,m,0,1,1,L,M,"L",L,b,"A",y,y,0,1,0,g,b].join(" "),"data-value":A})}else j=h("circle",{cx:g,cy:v,"data-value":A,r:m});else{var F=k+A,S=["M"].concat($(k,m),"A",m,m,0,E>.5?1:0,1,$(F,m),"L");y?S=S.concat($(F,y),"A",y,y,0,E>.5?1:0,0,$(k,y)):S.push(g,v),k+=A,j=h("path",{d:S.join(" "),"data-value":A})}j.attr("fill",x.call(this,A,l,a)),u.append(j)}}})),a.register("donut",t.extend(!0,{},a.defaults.pie),(function(t){a.graphers.pie.call(this,t)})),a.register("line",{delimiter:",",fill:"#c6d9fd",height:16,min:0,stroke:"#4d89f9",strokeWidth:1,width:32},(function(t){var i=this.values();1==i.length&&i.push(i[0]);for(var a=e.max.apply(e,t.max==n?i:i.concat(t.max)),r=e.min.apply(e,t.min==n?i:i.concat(t.min)),s=this.prepare(t.width,t.height),l=t.strokeWidth,p=s.width(),o=s.height()-l,d=a-r,u=this.x=function(t){return t*(p/(i.length-1))},c=this.y=function(t){var i=o;return d&&(i-=(t-r)/d*o),i+l/2},f=c(e.max(r,0)),g=[0,f],v=0;v<i.length;v++)g.push(u(v),c(i[v]));g.push(p,f),t.fill&&s.append(h("polygon",{fill:t.fill,points:g.join(" ")})),l&&s.append(h("polyline",{fill:"none",points:g.slice(2,g.length-2).join(" "),stroke:t.stroke,"stroke-width":l,"stroke-linecap":"square"}))})),a.register("bar",{delimiter:",",fill:["#4D89F9"],height:16,min:0,padding:.1,width:32},(function(t){for(var i=this.values(),a=e.max.apply(e,t.max==n?i:i.concat(t.max)),r=e.min.apply(e,t.min==n?i:i.concat(t.min)),s=this.prepare(t.width,t.height),l=s.width(),p=s.height(),o=a-r,d=t.padding,u=this.fill(),c=this.x=function(t){return t*l/i.length},f=this.y=function(t){return p-(o?(t-r)/o*p:1)},g=0;g<i.length;g++){var v,m=c(g+d),y=c(g+1-d)-m,w=i[g],x=f(w),$=x,k=x;o?w<0?$=f(e.min(a,0)):k=f(e.max(r,0)):v=1,0==(v=k-$)&&(v=1,a>0&&o&&$--),s.append(h("rect",{"data-value":w,fill:u.call(this,w,g,i),x:m,y:$,width:y,height:v}))}}))}(jQuery,document,Math),document.addEventListener("DOMContentLoaded",(function(){$(".peity-pie").peity("pie"),$(".peity-donut").peity("donut"),$(".peity-line").peity("line"),$(".peity-bar").peity("bar")}));