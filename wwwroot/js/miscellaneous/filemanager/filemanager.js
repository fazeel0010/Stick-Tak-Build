function filesAndFolderIcons(e){function t(e){var t=$(e).attr("data-file-icon");"folder"==t?$(e).children("b").prepend('<i class="fas fa-folder"></i>'):"html"==t||"css"==t||"js"==t||"php"==t?$(e).children("b").prepend('<i class="fas fa-file"></i>'):"layout"==t?$(e).children("b").prepend('<i class="fas fa-th-large"></i>'):"image"==t?$(e).children("b").prepend('<i class="far fa-images"></i>'):"video"==t&&$(e).children("b").prepend('<i class="fas fa-video"></i>')}"newData"==e?$('[data-new="new"][data-file-icon]').each((function(){t(this)})):$("[data-file-icon]").each((function(){t(this)}))}function allStructure(e){function t(){$('.big-file-manager ul li[data-file-icon="folder"]:not(:has(ul))').addClass("empty-folder"),$(".empty-folder").each((function(){$(this).find(".no-item-inside-folder").remove(),$(this).append('<ul class="no-item-inside-folder p-0"><div class="alert alert-danger">This folder has no items.</div></ul>')})),$(".big-file-manager ul li:has(ul)").addClass("has-files-of-folder"),$(".has-files-of-folder").each((function(){$(this).find(".cm-folder-back").remove(),$(this).children("b").prepend('<i title="Back" class="cm-folder-back btn btn-sm btn-default"><i class="fas fa-angle-left"></i></i>')}))}t()}function pasteData(){$(".data-moving").each((function(){$(".active-folder-wrapper:has(.no-item-inside-folder)")?($(".active-folder-wrapper.no-item-inside-folder").children("span").remove(),$(".active-folder-wrapper.no-item-inside-folder").removeClass("no-item-inside-folder"),$(this).clone().removeClass("data-copy").appendTo(".active-folder-wrapper"),$(".active-folder-wrapper").find("li").show(),$(".data-moving,.data-copy").removeClass("data-moving").removeClass("data-copy"),$(this).remove()):($(this).clone().removeClass("data-copy").appendTo(".active-folder-wrapper"),$(".data-moving,.data-copy").removeClass("data-moving").removeClass("data-copy"),$(this).remove())})),$(".data-copy").each((function(){$(".active-folder-wrapper:has(.no-item-inside-folder)")?($(".active-folder-wrapper.no-item-inside-folder").children("span").remove(),$(".active-folder-wrapper.no-item-inside-folder").removeClass("no-item-inside-folder"),$(this).clone().removeClass("data-copy").appendTo(".active-folder-wrapper"),$(".active-folder-wrapper").find("li").show(),$(".data-moving,.data-copy").removeClass("data-moving").removeClass("data-copy")):($(this).clone().removeClass("data-copy").appendTo(".active-folder-wrapper"),$(".data-moving,.data-copy").removeClass("data-moving").removeClass("data-copy"))}))}function deleteData(){if("undefined"==typeof bootbox)return 1==confirm("Are you Sure To Delete.")&&($(".select").remove(),!1);bootbox.confirm({title:"<i class='"+myapp_config.appIconPrefix+" fa-exclamation-triangle text-warning mr-2'></i> Are you Sure To Delete?",message:"<span><strong>Warning:</strong> This action is not reversable. You will lose all your layout settings.</span>",centerVertical:!0,swapButtonOrder:!0,buttons:{confirm:{label:"Delete",className:"btn-danger shadow-0"},cancel:{label:"Cancel",className:"btn-success"}},className:"modal-alert",closeButton:!1,callback:function(e){1==e&&$(".select").remove()}})}function renameData(e){$(".renaming").removeClass("renaming"),$(e).closest("li").addClass("renaming"),$(e).closest("li").find(".name").attr("contenteditable",!0).select().focus(),$(".renaming").removeClass("select")}function copyToClipboard(e){var t=$("<input>");$("body").append(t);var a="{{ "+$(e).closest("[data-file-id]").attr("data-file-id")+" }}";t.val(a).select(),document.execCommand("copy"),t.remove(),$(".filemanager-structure").append('<div class="copied">Copied !</div>'),setTimeout((function(){$(".copied").addClass("copied-visible")}),500),setTimeout((function(){$(".copied").remove()}),3e3)}function copyToClipboardPath(e){var t=$("<input>");$("body").append(t);var a=$(e).closest("[data-path]").attr("data-path");t.val(a).select(),document.execCommand("copy"),t.remove(),$(".filemanager-structure").append('<div class="copied">Copied !</div>'),setTimeout((function(){$(".copied").addClass("copied-visible")}),500),setTimeout((function(){$(".copied").remove()}),3e3)}function createFileAndFolderDataBase(){$(".big-file-manager.filemanager-structure > ul li").each((function(){var e=$(this).children("b").not(".cm-folder-back").text().toLowerCase().split(" ").join("-");$(this).attr("data-slug",e)})),$("[data-slug]").each((function(){var e=$(this).attr("data-slug"),t=$(this).parents("li").map((function(){return $(this).attr("data-slug")})).get().reverse().join("/");""==t?$(this).attr("data-path",e):$(this).attr("data-path",t+"/"+e)}));var e=[];$("[data-file-id]").each((function(){var t={},a=$(this).attr("data-file-id"),i=$(this).attr("data-path");t.fileID="{{"+a+"}}",t.filePath=i,e.push(t)}))}function removeUnwanted(){$(".active-folder-wrapper ~ .active-folder-wrapper,.active-folder-wrapper ~ .no-item-inside-folder").remove()}$(".big-file-manager.filemanager-structure ul > li > b").contents().filter((function(){return 3==this.nodeType&&""!=$.trim(this.textContent)})).wrap('<span autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" class="name" />'),filesAndFolderIcons(),$(".big-file-manager > ul").addClass("active-folder-wrapper"),$(".big-file-manager").addClass("small"),allStructure(),$(document).on("dblclick",".big-file-manager ul li.has-files-of-folder",(function(e){$(".big-file-manager ul").removeClass("active-folder-wrapper"),$(this).children("ul").addClass("active-folder-wrapper"),$(this).siblings("li").hide(),$(this).addClass("file-sub-active").children("ul").show()})),$(document).on("dblclick",".big-file-manager ul li.has-files-of-folder",(function(e){$(".has-files-of-folder").removeClass("show-up").addClass("hide-up"),$(this).addClass("show-up").removeClass("hide-up")})),$(document).on("dblclick",".big-file-manager ul li",(function(e){e.stopPropagation()})),$(document).on("click",".cm-folder-back",(function(e){e.stopPropagation(),$(".big-file-manager ul").removeClass("active-folder-wrapper"),$(this).parent("b").closest("ul").addClass("active-folder-wrapper"),$(this).closest(".file-sub-active").siblings("li").show(),$(this).closest(".file-sub-active").removeClass("file-sub-active"),$(this).closest(".has-files-of-folder").find("ul").hide(),$(".has-files-of-folder").removeClass("show-up").addClass("hide-up"),$(this).closest(".file-sub-active").addClass("show-up").removeClass("hide-up"),$(this).parent("b").next("ul").children("li").removeClass("select")})),$(document).on("dblclick click",".big-file-manager ul li,.cm-folder-back",(function(e){var t=$(".show-up[data-file-icon]").attr("data-path");if(!t)return $(".address-short-btn").empty(),$(".address-search-input").val(""),$(".files-search-input").attr("placeholder","Search.."),!1;if(t.indexOf("/")){$(".address-search-input").val(t);var a=t.toString().split("/");$(".address-short-btn").empty();for(var i=0;i<a.length;i++)$(".address-short-btn").append("<div data-address><span>"+a[i]+'</span><i class="fas fa-caret-right"></i></div>');var o=$(".big-file-manager.filemanager-structure ul > li.show-up > b").text();$(".files-search-input").attr("placeholder","Search in "+o)}else $(".address-short-btn").empty(),$(".address-short-btn").append("<div data-address><span>"+t+"</span></div>"),$(".files-search-input").attr("placeholder","Search..")})),$(document).on("contextmenu","[data-file-icon]:not(.show-up)",(function(e){$(this).offset();var t=e.pageY,a=e.pageX;return $(".append-option-box").remove(),$(this).addClass("context-visible").addClass("select"),$(this).append('<div class="append-option-box dropdown-menu d-block" style="top:'+t+"px;left:"+a+'px;"><div class="inner-contenxt-box"><div data-open="data-move" class="dropdown-item">Open</div><div data-function="data-copy" class="dropdown-item">Copy</div> <div data-function="data-move" class="dropdown-item">Move</div> <div data-function="data-rename" class="dropdown-item">Rename</div> <div data-function="data-delete" class="dropdown-item">Delete</div> <div class="dropdown-item">Share</div> <div data-function="data-properties" class="dropdown-item">Properties</div></div></div>'),$(".append-option-box>div>div:has(div)").addClass("has-sub-context"),"folder"!=$(this).attr("data-file-icon")&&($(".append-option-box .inner-contenxt-box").append('<div data-function="data-copy-path" class="dropdown-item">Copy Path</div>'),$(".append-option-box .inner-contenxt-box").append('<div data-function="data-copy-secure-path" class="dropdown-item">Copy Secure Path</div>')),!1})),$(document).on("contextmenu",".filemanager-structure",(function(e){$(this).offset();var t=e.pageY,a=e.pageX;return $(".append-option-box").remove(),$(this).append('<div class="append-option-box dropdown-menu d-block" style="top:'+t+"px;left:"+a+'px;">\t\t\t<div class="inner-contenxt-box"> \t\t\t\t<div data-function="view" class="dropdown-multilevel mod-disable-animation"> \t\t\t\t\t<div class="dropdown-item">View</div>\t\t\t\t\t<div class="dropdown-menu"> \t\t\t\t\t\t<div class="dropdown-item" data-size="small">Small</div> \t\t\t\t\t\t<div class="dropdown-item" data-size="medium">Medium</div> \t\t\t\t\t\t<div class="dropdown-item" data-size="large">Large</div> \t\t\t\t\t</div>\t\t\t\t</div> \t\t\t\t<div data-function="short" class="dropdown-multilevel mod-disable-animation"> \t\t\t\t\t<div class="dropdown-item">Short</div>\t\t\t\t\t<div class="dropdown-menu"> \t\t\t\t\t\t<div class="dropdown-item">Name</div> \t\t\t\t\t\t<div class="dropdown-item">Date Modified</div> \t\t\t\t\t\t<div class="dropdown-item">Size</div> \t\t\t\t\t\t<div class="dropdown-item">Type</div> \t\t\t\t\t</div> \t\t\t\t</div> \t\t\t<div data-function="new" class="dropdown-multilevel mod-disable-animation"> \t\t\t\t<div class="dropdown-item">New</div>\t\t\t\t<div class="dropdown-menu"> \t\t\t\t\t<div class="dropdown-item">HTML File</div> \t\t\t\t\t<div class="dropdown-item">CSS File</div> \t\t\t\t\t<div class="dropdown-item">JS File</div> \t\t\t\t\t<div class="dropdown-item">PHP File</div> \t\t\t\t\t<div class="dropdown-item">Custom File</div> \t\t\t\t</div> \t\t\t</div> \t\t\t<div data-function="new-folder" class="dropdown-item">New Folder</div> \t\t\t<div data-function="paste-data" class="dropdown-item">Paste</div> \t\t\t<div data-function="folder-properties" class="dropdown-item">Properties</div> \t\t</div> \t</div>'),$(".append-option-box>div>div:has(div)").addClass("has-sub-context"),$(".has-sub-context").append('<i class="fas fa-chevron-right"></i>'),!1})),$(document).on("click contextmenu dblclick",(function(){$("[data-file-icon]").removeClass("context-visible").removeClass("select renaming"),$(".append-option-box").remove(),removeUnwanted(),$(".name").attr("contenteditable",!1)})),$(document).on("click contextmenu",".append-option-box",(function(e){e.stopPropagation(),$("[data-file-icon]").removeClass("context-visible").removeClass("select"),$(".append-option-box").remove()})),$(document).on("click contextmenu","[data-file-icon]",(function(e){e.stopPropagation()})),$(window).on("keydown",(function(e){if(39===e.keyCode)$(".select").next("[data-file-icon]").addClass("select").siblings().removeClass("select");else if(37===e.keyCode)$(".select").prev("[data-file-icon]").addClass("select").siblings().removeClass("select");else if(13===e.keyCode)$(".select:not(:last)").each((function(){$(this).removeClass("select")})),$(".select").dblclick();else{if(e.ctrlKey&&88===e.keyCode)return $(".data-moving,.data-copy").removeClass("data-moving").removeClass("data-copy"),$(".select").addClass("data-moving").removeClass("data-copy"),!1;if(e.ctrlKey&&67===e.keyCode)return $(".data-moving,.data-copy").removeClass("data-moving").removeClass("data-copy"),$(".select").addClass("data-copy").removeClass("data-moving"),!1;e.ctrlKey&&86===e.keyCode?(pasteData(),createFileAndFolderDataBase()):46===e.keyCode?deleteData():27===e.keyCode||8===e.keyCode?$(".filemanager-structure ul > li.show-up > b > .cm-folder-back").click():e.ctrlKey&&65===e.keyCode||113===e.keyCode&&renameData(".select")}})),$(document).on("click","[data-file-icon]",(function(e){e.ctrlKey?($(this).addClass("select"),$(this).removeClass("renaming")):($(".select").removeClass("select"),$(this).addClass("select").siblings().removeClass("select"),$(this).removeClass("renaming"))})),$(document).on("click",'[data-function="data-open"]',(function(){$(".select").dblclick()})),$(document).on("click",'[data-function="data-move"]',(function(){$(".data-moving,.data-copy").removeClass("data-moving").removeClass("data-copy"),$(".select").addClass("data-moving").removeClass("data-copy")})),$(document).on("click",'[data-function="data-copy"]',(function(){$(".data-moving,.data-copy").removeClass("data-moving").removeClass("data-copy"),$(".select").addClass("data-copy").removeClass("data-moving")})),$(document).on("click",'[data-function="paste-data"]',(function(){pasteData()})),$(document).on("click",'[data-function="data-properties"]',(function(){$(".cm-properties-popup-section").addClass("open")})),$(document).on("click",".cm-properties-close",(function(){$(".cm-properties-popup-section").removeClass("open")})),$(document).on("click",'[data-function="data-rename"]',(function(){renameData(this)})),$(document).on("click",'[data-function="data-delete"]',(function(){deleteData(),createFileAndFolderDataBase()})),$(document).on("click",'[data-function="data-copy-secure-path"]',(function(){copyToClipboard(this)})),$(document).on("click",'[data-function="data-copy-path"]',(function(){copyToClipboardPath(this)})),createFileAndFolderDataBase(),$(document).on("click","[data-size]",(function(){var e=$(this).attr("data-size");$(".big-file-manager").removeClass("small medium large"),$(".big-file-manager").addClass(e)})),$(document).on("click",'[data-function="new-folder"]',(function(){$(".no-item-inside-folder.active-folder-wrapper").empty().removeClass("no-item-inside-folder").addClass("active-folder-wrapper"),$(".active-folder-wrapper").append('<li data-file-icon="folder" data-new="new" data-cloud="load"><b>New Folder</b></li>'),filesAndFolderIcons("newData"),allStructure(),createFileAndFolderDataBase(),$('[data-new="new"]').removeAttr("data-new"),removeUnwanted()})),$(".address-search-input").focus((function(){$(".address-short-btn").hide(),$(this).select()})).blur((function(){$(".address-short-btn").show()}));